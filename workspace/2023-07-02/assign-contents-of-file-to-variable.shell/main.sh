#!/bin/bash

set -eu

# ==============================================================================
#
# NG: 末尾の空行が失われてしまう
#

cat <<EOS > a.txt

ファイルの先頭に空行が 1 つ
ファイルの末尾に空行が 2 つ


EOS

text="$(cat a.txt)"

echo "--------------------------------"
cat a.txt
echo "--------------------------------"
echo "${text}"
echo "--------------------------------"

# ==============================================================================
#
# OK
#

cat <<EOS > a.txt

ファイルの先頭に空行が 1 つ
ファイルの末尾に空行が 2 つ


EOS

text="$(cat a.txt && echo .)"
text="${text:0:-2}"

echo "--------------------------------"
cat a.txt
echo "--------------------------------"
echo "${text}"
echo "--------------------------------"

# ==============================================================================

